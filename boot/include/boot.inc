;配置信息文件(loader和kernel)

LOADER_BASE_ADDR equ 0x900
LOADER_START_SECTOR equ 0x2

;----------------全局描述符表属性----------------
; 定义段界限的单位为4k
DESC_G_4K equ 10000000_00000000_00000000b
; 定义指令中有效地址和操作数为32位
DESC_D_32 equ 1000000_00000000_00000000b
; 定义32位代码段
DESC_L equ 000000_00000000_00000000b
; 对于操作系统，CPU不会使用此位
DESC_AVL equ 00000_00000000_00000000b
; 代码段界限第2部分(16~19位)
DESC_LIMIT_CODE2 equ 1111_00000000_00000000b
; 数据段界限第2部分(16~19位)
DESC_LIMIT_DATA2 equ DESC_LIMIT_CODE2
; 显存段
DESC_LIMIT_VIDEO2 equ 0000_00000000_00000000b
; 段存在于内存中
DESC_P equ 10000000_00000000b
; 0特权级
DESC_DPL_0 equ 0000000_00000000b
; 1特权级
DESC_DPL_1 equ 0100000_00000000b
; 2特权级
DESC_DPL_2 equ 1000000_00000000b
; 3特权级
DESC_DPL_3 equ 1100000_00000000b
; 代码段
DESC_S_CODE equ 10000_00000000b
; 数据段
DESC_S_DATA equ DESC_S_CODE
; 系统段
DESC_S_SYS equ 00000_00000000b
; 代码段可执行，非一致性，不可读，已访问为清0
DESC_TYPE_CODE equ 1000_00000000b
; 数据段不可执行，向上扩展，可写，已访问为清0
DESC_TYPE_DATA equ 0010_00000000b

;定义代码段的高位4个字节，0x00 << 24代表24~31位的段基址，0x00代表0~7的段基址
DESC_CODE_HIGH4 equ (0x00 << 24) + DESC_G_4K + DESC_D_32 +\
DESC_L + DESC_AVL + DESC_LIMIT_CODE2 + DESC_P + DESC_DPL_0 +\
DESC_S_CODE + DESC_TYPE_CODE + 0x00

;定义数据段的高位4个字节，0x00 << 24代表24~31位的段基址，0x00代表0~7的段基址
DESC_DATA_HIGH4 equ (0x00 << 24) + DESC_G_4K + DESC_D_32 + \
DESC_L + DESC_AVL + DESC_LIMIT_DATA2 + DESC_P + DESC_DPL_0 + \
DESC_S_DATA + DESC_TYPE_DATA + 0x00

; 显存段
DESC_VIDEO_HIGH4 equ (0x00 << 24) + DESC_G_4K + DESC_D_32 + \
DESC_L + DESC_AVL + DESC_LIMIT_VIDEO2 + DESC_P + DESC_DPL_0 + \
DESC_S_DATA + DESC_TYPE_DATA + 0x00

;----------段选择子------------
RPL0 equ 00b
RPL1 equ 01b
RPL2 equ 10b
RPL3 equ 11b
TI_GDT equ 000b
TI_LDT equ 100b
